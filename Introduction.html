
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Introduction &#8212; EPICS Sequencer Version 2.2</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/naturefixed.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Download and Installation" href="Installation.html" />
    <link rel="prev" title="Users’ Guide" href="Manual.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="Installation.html" title="Download and Installation"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="Manual.html" title="Users’ Guide"
             accesskey="P">previous</a> |</li>
    <span style="font-size:150%; font-weight:bold" ><a href="index.html">EPICS Sequencer Version 2.2</a></span>
          <li class="nav-item nav-item-1"><a href="Manual.html" accesskey="U">Users’ Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="about">
<h2>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h2>
<p>This project is a component of the <em>Experimental Physics and Industrial
Control System</em> (<a class="reference external" href="http://www.aps.anl.gov/epics/">EPICS</a>), a set of tools, libraries and applications
developed collaboratively and used worldwide to create distributed soft
real-time control systems for large scale scientific instruments.</p>
<p>The <em>State Notation Language</em> (SNL), is a <a class="reference external" href="http://en.wikipedia.org/wiki/Domain-specific_programming_language">domain specific programming
language</a> that smoothly integrates with and depends and builds on EPICS
<a class="reference external" href="http://www.aps.anl.gov/epics/base/index.php">base</a>. This project defines SNL and provides an implementation, consisting
of the SNL compiler and runtime system.</p>
<p>The Sequencer is <a class="reference external" href="http://www.gnu.org/philosophy/free-sw.html">free software</a>, licensed under the <a class="reference external" href="http://www.aps.anl.gov/epics/license/open.php">EPICS Open License</a>.</p>
<p>For further information</p>
<ul class="simple">
<li><p>take a look at the <a class="reference internal" href="#overview"><span class="std std-ref">Overview</span></a> to get a first impression of the
Sequencer’s features.</p></li>
<li><p>This <a class="reference external" href="http://www-csr.bessy.de/control/SoftDist/sequencer/talks/epics-meeting-2011-PSI/sequencer-2-1-slides.pdf">talk about version 2.1 of the Sequencer</a> contains a short
introduction to SNL, including a walk through a simple example program to
illustrate the basic concepts.</p></li>
<li><p>A (slightly out-dated) <a class="reference internal" href="Tutorial.html"><span class="doc">Tutorial</span></a> is also available,</p></li>
<li><p>as well as a detailed <a class="reference internal" href="Reference.html"><span class="doc">SNL Reference for Version 2.2</span></a>,</p></li>
<li><p>and instructions for download and <a class="reference internal" href="Installation.html"><span class="doc">Download and Installation</span></a>.</p></li>
<li><p>All of these are part of the <a class="reference internal" href="Manual.html"><span class="doc">Users’ Guide</span></a>.</p></li>
</ul>
<p>This page describes version 2.2 and the documentation, in particular the
language reference, has been updated to reflect the <a class="reference internal" href="ReleaseNotes-2-2.html#release-notes-2-2-1"><span class="std std-ref">changes between 2.1 and
2.2</span></a>. For older versions, please refer to <a class="reference external" href="http://www-csr.bessy.de/control/SoftDist/sequencer-2-1/index.html">the old version of this page</a>.</p>
</div>
<div class="section" id="overview">
<span id="id1"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In SNL you structure your program as a set of concurrently running finite
state machines, called <a class="reference internal" href="Reference.html#grammar-token--77"><code class="xref any std std-token docutils literal notranslate"><span class="pre">state_sets</span></code></a>. State sets are declared by
listing their <a class="reference internal" href="Reference.html#grammar-token--83"><code class="xref any std std-token docutils literal notranslate"><span class="pre">states</span></code></a>, which in turn define under which condition
(<a class="reference internal" href="Reference.html#grammar-token--91"><code class="xref any std std-token docutils literal notranslate"><span class="pre">when</span></code></a>) the state set reaches another state and what the program
should do once the transition is triggered.</p>
<p>SNL allows you to bind program variables to externally defined <em>process
variables</em> (PVs), such as provided by an EPICS runtime database. This can be
done in such a way that the value of the program variable gets continuously
updated whenever the value of the acssociated PV changes. Such variables can
then be used inside the state transition conditions, and the runtime system
takes care that the conditions are evaluated when and only when changes to
the associated PV occur.</p>
<p>In the code that gets executed when a state transition takes place, you can
explicitly read the value of the PV into the associated program variable
(<a class="reference internal" href="Reference.html#c.pvGet" title="pvGet"><code class="xref any c c-func docutils literal notranslate"><span class="pre">pvGet</span></code></a>), or to send the value of the variable to update the PV
(<a class="reference internal" href="Reference.html#c.pvPut" title="pvPut"><code class="xref any c c-func docutils literal notranslate"><span class="pre">pvPut</span></code></a>). (These are just the two most important of many more
<a class="reference internal" href="Reference.html#builtinfunctions"><span class="std std-ref">Built-in Functions</span></a>.)</p>
<p>The mechanism behind all this PV magic is the EPICS <a class="reference external" href="http://www.aps.anl.gov/epics/base/R3-14/12-docs/CAref.html">Channel Access</a>
network protocol with its support for subscriptions. However, when
programming in SNL you need not concern yourself with the details of the
mechanism. The SNL compiler and runtime system manage all this behind the
scenes, and also take care that the integrity of your variables is
maintained, even in the presence of multiple concurrent state sets inside a
single program (at least in <a class="reference internal" href="Reference.html#safe-mode"><span class="std std-ref">Safe Mode</span></a>). <em>Programming in SNL is free
of locks and therefore also free of deadlocks.</em></p>
<p>Despite all this, SNL is emphatically <em>not</em> a <a class="reference external" href="http://www.haskell.org/">high-level language</a>: most
of its syntax and semantics are directly inherited from C. The language is
designed for seamless integration with C code; for instance, you can
directly call C procedures in SNL action blocks and state transition
conditions, and the types of variables you can declare in SNL map directly
to C types. The compiler for SNL (called <a class="reference internal" href="Glossary.html#term-snc"><code class="xref any std std-term docutils literal notranslate"><span class="pre">snc</span></code></a>, see <a class="reference internal" href="Compiling.html"><span class="doc">Compiling SNL Programs</span></a>) takes
a very minimalistic approach to compilation by generating portable standard
C89/90 code that works on all platforms supported by EPICS. In fact, most of
the SNL action code is compiled almost verbatim to C, and the generated code
is quite human readable. The SNL compiler also delegates all type checking
to the C compiler (and some care has been taken to generate the code in such
a way that the C type checker has actually enough information to <em>do</em> useful
type checking).</p>
<p>Compilation of the generated code and linking to the SNL runtime system is
also <em>not</em> done by snc. Instead this task is delegated to the EPICS build
system by making the Sequencer an EPICS <em>support module</em> that automatically
adds appropriate build rules for SNL source files.</p>
</div>
<div class="section" id="acknowledgements">
<h2>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>The sequencer was originally developed by Andy Kozubal at Los Alamos
National Laboratory (LANL). It was subsequently modified by William
Lupton, formerly at  the W. M. Keck Observatory (Keck), with
contributions by Greg White of the Stanford Linear Accelerator Center
National Accelerator Laboratory (SLAC-NAL).</p>
<p>Eric Norum, Janet Anderson, and Marty Kraimer (APS) made the initial
port to EPICS 3.14 that led to the 2.0.x series. Eric Norum and Andrew
Johnson (APS) provided lots of patches up to release 2.0.12.</p>
<p>Mark Rivers made a number of useful suggestions and tested version 2.1
with several sets of existing programs on various platforms. J. Lewis
Muir provided documentation patches.</p>
<p>Special thanks go to the people who develop and maintain <a class="reference external" href="http://re2c.org/">re2c</a>, the
ultimate tool to generate versatile and extremely fast lexers for C and C++.</p>
</div>
<div class="section" id="copying-and-distribution">
<h2>Copying and Distribution<a class="headerlink" href="#copying-and-distribution" title="Permalink to this headline">¶</a></h2>
<p>The EPICS Sequencer is distributed subject to a Software License
Agreement found in the file LICENSE that is included with this
distribution.</p>
<dl class="simple">
<dt>Copyright (c) 1989-1994 The Regents of the University of California</dt><dd><p>and the University of Chicago Board of Governors.
Los Alamos National Laboratory</p>
</dd>
<dt>Copyright (c) 2010-2015 Helmholtz-Zentrum Berlin f. Materialien</dt><dd><p>und Energie GmbH, Germany (HZB)</p>
</dd>
</dl>
<p>All rights reserved.</p>
<p>The EPICS Sequencer is distributed subject to the following license conditions:</p>
<blockquote>
<div><p>SOFTWARE LICENSE AGREEMENT
Software: EPICS Sequencer</p>
<ol class="arabic">
<li><p>The “Software”, below, refers to EPICS Sequencer (in either source code, or
binary form and accompanying documentation). Each licensee is
addressed as “you” or “Licensee.”</p></li>
<li><p>The copyright holders shown above and their third-party licensors
hereby grant Licensee a royalty-free nonexclusive license, subject to
the limitations stated herein and U.S. Government license rights.</p></li>
<li><p>You may modify and make a copy or copies of the Software for use
within your organization, if you meet the following conditions:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Copies in source code must include the copyright notice and this
Software License Agreement.</p></li>
<li><p>Copies in binary form must include the copyright notice and this
Software License Agreement in the documentation and/or other
materials provided with the copy.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>You may modify a copy or copies of the Software or any portion of it,
thus forming a work based on the Software, and distribute copies of
such work outside your organization, if you meet all of the following
conditions:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Copies in source code must include the copyright notice and this
Software License Agreement;</p></li>
<li><p>Copies in binary form must include the copyright notice and this
Software License Agreement in the documentation and/or other
materials provided with the copy;</p></li>
<li><p>Modified copies and works based on the Software must carry
prominent notices stating that you changed specified portions of
the Software.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Portions of the Software resulted from work developed under a U.S.
Government contract and are subject to the following license: the
Government is granted for itself and others acting on its behalf a
paid-up, nonexclusive, irrevocable worldwide license in this computer
software to reproduce, prepare derivative works, and perform publicly
and display publicly.</p></li>
<li><p>WARRANTY DISCLAIMER. THE SOFTWARE IS SUPPLIED “AS IS” WITHOUT WARRANTY
OF ANY KIND. THE COPYRIGHT HOLDERS, THEIR THIRD PARTY LICENSORS, THE
UNITED STATES, THE UNITED STATES DEPARTMENT OF ENERGY, AND THEIR
EMPLOYEES: (1) DISCLAIM ANY WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
BUT NOT LIMITED TO ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE, TITLE OR NON-INFRINGEMENT, (2) DO NOT ASSUME
ANY LEGAL LIABILITY OR RESPONSIBILITY FOR THE ACCURACY, COMPLETENESS,
OR USEFULNESS OF THE SOFTWARE, (3) DO NOT REPRESENT THAT USE OF THE
SOFTWARE WOULD NOT INFRINGE PRIVATELY OWNED RIGHTS, (4) DO NOT WARRANT
THAT THE SOFTWARE WILL FUNCTION UNINTERRUPTED, THAT IT IS ERROR-FREE
OR THAT ANY ERRORS WILL BE CORRECTED.</p></li>
<li><p>LIMITATION OF LIABILITY. IN NO EVENT WILL THE COPYRIGHT HOLDERS, THEIR
THIRD PARTY LICENSORS, THE UNITED STATES, THE UNITED STATES DEPARTMENT
OF ENERGY, OR THEIR EMPLOYEES: BE LIABLE FOR ANY INDIRECT, INCIDENTAL,
CONSEQUENTIAL, SPECIAL OR PUNITIVE DAMAGES OF ANY KIND OR NATURE,
INCLUDING BUT NOT LIMITED TO LOSS OF PROFITS OR LOSS OF DATA, FOR ANY
REASON WHATSOEVER, WHETHER SUCH LIABILITY IS ASSERTED ON THE BASIS OF
CONTRACT, TORT (INCLUDING NEGLIGENCE OR STRICT LIABILITY), OR
OTHERWISE, EVEN IF ANY OF SAID PARTIES HAS BEEN WARNED OF THE
POSSIBILITY OF SUCH LOSS OR DAMAGES.</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="note-on-versions">
<h2>Note on Versions<a class="headerlink" href="#note-on-versions" title="Permalink to this headline">¶</a></h2>
<p>This manual describes version 2.2 of the sequencer. This version adds
support for declaring variables of almost all types expressible in C. It
also adds support for defining functions and struct types in SNL. The
backend of the compiler was changed so that generated names follow a
consistent naming convention. The interface between compiler and runtime
system has been separated from the public API available to escaped C code.</p>
<p>Version 2.1 added
support for local definitions (including variable declarations) at all
levels, a significantly improved compiler that employs new lexer and
parser generators, lots of bug fixes, and a new <em>safe mode</em> to avoid
variable corruption due to race conditions.</p>
<p>Version 2.0 differs from version 1.9 mainly in that sequencer
run-time code can run under any operating system for which an EPICS
OSI (Operating System Independent) layer is available, and message
systems other than channel access can be used. It depends on
libraries which are available only with EPICS R3.14.</p>
<p>An interim version 1.9.4 was made available to the EPICS community;
all new developments apart from major bug fixes will be based on
version 2.0.</p>
<p>Version 1.9 was written by Andy Kozubal, the original author of this
software. This version of the manual describes version 2.0, for
which the changes have been implemented by William Lupton of W. M.
Keck Observatory and Greg White of Stanford Linear Accelerator
Center (SLAC).</p>
<div class="section" id="versioning-policy">
<span id="versioningpolicy"></span><h3>Versioning Policy<a class="headerlink" href="#versioning-policy" title="Permalink to this headline">¶</a></h3>
<p>Starting with release 2.0.0, the third digit is the patch level and will be
incremented each time a new version is released, no matter how minor the
changes (except if it is zero). The second digit is the minor release number
and will be incremented each time functional changes are made. The first
digit is the major release number and will be incremented only when major
changes are made.</p>
<p>Starting with version 2.1, the following refined rules apply:</p>
<ul>
<li><p>Changes in the major (first) number indicate disruptive
changes that may break backward compatibility. When upgrading to a
new major version, existing programs may need to be reviewed and
possibly adapted to changes in syntax or semantics.</p></li>
<li><p>An increase of the minor (second) release number indicates the
availability of new features, while source code compatibility for
existing programs is preserved. However, such changes may
involve major re-organizations of the implementation, und
therefore introduce new bugs. Care should be taken when upgrading
to a new minor release, especially if the new patch-level number
is zero: these should be used in production systems only after
testing that everything still works as expected.</p>
<p>Major and minor release number together are referred to as the sequencer’s
<em>version</em>.</p>
</li>
<li><p>Changes in the patch-level (third) release number are strictly
reserved for bug-fixes, including fixes and extensions to the
documentation and the tests. No new features will appear, except
where unavoidable to cleanly fix a bug. It should always be safe
(and is recommended) to upgrade to the latest patch level release.</p></li>
<li><p>A patch-level release number of zero indicates a pre-release. Such
releases are still in the process of stabilizing and thus might receive
significant changes if it turns out that this would be better in the long
run. A fourth number may indicate progress toward the first stable
release, indicated by a patch-level release number of one.</p></li>
</ul>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3><a href="Manual.html">Table Of Contents</a></h3>
<ul>
<li><a class="reference internal" href="#">Introduction</a><ul>
<li><a class="reference internal" href="#about">About</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
<li><a class="reference internal" href="#copying-and-distribution">Copying and Distribution</a></li>
<li><a class="reference internal" href="#note-on-versions">Note on Versions</a><ul>
<li><a class="reference internal" href="#versioning-policy">Versioning Policy</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Manual.html"
                        title="previous chapter">Users’ Guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Installation.html"
                        title="next chapter">Download and Installation</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>